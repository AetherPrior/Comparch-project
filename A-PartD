;  store initial memory location in memory (0x00)
; read memory location (0x00) when storing to memory
; increment 0x00
; PTR_LOC is a (reserved) address EQU for indirect_store and indirect_load
; COUNTER_LOC is a (reserved) address EQU for maintaining a counter variable
; memory map is as follows:
; Word  used_for
; 0x00 - indirect loc
; 0x01 - counter loc
; 0x02- 0x7F unused
; 0x80 -  program start (128 words of program memory, 128 words of data) 
;--------------------user defined EQUs-------------------------------;
origCount EQU 0x07
origPtr EQU 0x08
arrStart EQU 0x10
;----------------------------------------------------------------------------;
;code section start
ldai arrStart  
sta PTR_LOC ;0x10 is a pointer to array
sta origPtr ;0x08 has original location
ipa         ;get number
sta  COUNTER_LOC;0x09 isa pointer to number
sta origCount ;0x07 has original counter
loop:
    lda COUNTER_LOC
    bz end
    ;subi 1 ;subtract 8 bit signed integer
    dea
    sta COUNTER_LOC
    ipa
    indirect_store PTR_LOC
    ;INCREMENT PTR_LOC
    lda PTR_LOC
    ina
    sta PTR_LOC
    jmp loop
end:
    lda origCount
    bz halt
    dea
    sta origCount
    indirect_load origPtr
    opa
    lda origPtr
    ina
    sta origPtr
    jmp end
halt:
    hlt
    
    
    
